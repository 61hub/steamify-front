(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=a(10),s=a(17),i=a(31),m=a(32),p=a(49),u=a(33),d=a(50),f=a(14),E=a.n(f),g=a(30),h=a(24),v=function(e){var t=0;if(!e.items&&e.dlc.length>0&&e.dlc.forEach(function(e){t+=e.price}),"pack"===e.type){var a=0;return e.games.forEach(function(e){return a+=e.playtimeForever}),a<=60?e.price:Math.round(e.price/a/60)}if(e.playtimeForever<=60)return e.price+t;var n=e.playtimeForever/60;return(e.price+t)/n},b=function(e){var t=Math.floor(e/60),a=e%60;return a>10&&a.toString().length<2&&(a*=10),t?a?"".concat(t,"h ").concat(a,"m"):"".concat(t,"h"):"".concat(a,"m")},y=a(22),_=a.n(y),O=a(3),k=a.n(O),S=a(34),j=a(13),D=a(61),P=a.n(D),C=function(e){var t=e.src;return r.a.createElement("div",{className:P.a.logoWrapper},r.a.createElement("img",{src:t,alt:"Game logo"}))},I=a(16),N=a.n(I),G=function(e){var t=e.type,a=Object(h.a)(e,["type"]);return r.a.createElement("span",Object.assign({role:"img","aria-label":"emoji"},a),t)},x=function(e){var t=e.data,a=(t=void 0===t?{}:t).status,n=t.totalPrice,c=t.name,l=Object(h.a)(t,["status","totalPrice","name"]),o=e.index,s=e.onTitleClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:N.a.gameInformation},r.a.createElement("div",{className:N.a.gameName,onClick:s},c),r.a.createElement("div",{className:N.a.gameMinorInfo},r.a.createElement("div",{className:k()(N.a.gameHourPrice,N.a[function(e){var t=v(e);return t<=10?"darkGreen":t<=50?"green":t<=100?"yellow":t<=200?"orange":t>=200?"red":void 0}(l)])}),r.a.createElement("div",{className:N.a.gameIndex},"#",o+1),r.a.createElement("div",null,n,"P"))),r.a.createElement("div",{className:N.a.gameDuration},r.a.createElement("div",{className:N.a.status},"completed"===a&&r.a.createElement(G,{type:"\u2705"}),"endless"===a&&r.a.createElement(G,{type:"\u221e",className:N.a.endless}),"playing"===a&&r.a.createElement(G,{type:"\ud83d\udd79"}),"abandoned"===a&&r.a.createElement(G,{type:"\u2620\ufe0f"}),"story"===a&&r.a.createElement(G,{type:"\ud83d\udcd6"})),b(l.playtimeForever)))},F=a(118),T=a(121),w=a(119),W=a(53),A=function(e){var t=e.label,a=e.placeholder,n=e.helperText,c=void 0===n?"":n,l=e.input,o=Object(h.a)(e,["label","placeholder","helperText","input"]);return r.a.createElement(F.a,{helperText:c,label:t,labelFor:"field-".concat(t)},r.a.createElement(T.a,Object.assign({id:"field-".concat(t),placeholder:a||t,onValueChange:l.onChange},l,o)))},R=function(e){var t=e.input,a=e.options;Object(h.a)(e,["input","options"]);return r.a.createElement(F.a,{label:"Game Status",labelFor:"field-status"},r.a.createElement(w.a,Object.assign({options:a,id:"field-status"},t)))},B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).toggleOptions=function(){a.setState({isExpanded:!a.state.isExpanded})},a.addToPack=function(e,t){t.preventDefault();var n=a.selectRef.current.options[a.selectRef.current.selectedIndex].value,r=a.props.packages.find(function(e){return e.packId===n});E.a.patch("http://steamify-api.61hub.com/v1/packs/".concat(n),{items:Object(o.a)(r.items).concat([e])}).then(function(){a.props.onAddedToPack(),a.onChange({status:"hidden"})})},a.onChange=function(){var e=a.props,t=e.onChange,n=e.data;a.toggleOptions();for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return t.apply(void 0,[n.appId].concat(c))},a.renderOptions=function(){var e=a.props.data,t=["default","playing","completed","endless","abandoned","hidden","story"];return r.a.createElement("div",{className:_.a.options},r.a.createElement(j.b,{onSubmit:function(){var e;return(e=a).onChange.apply(e,arguments)},render:function(a){var n=a.handleSubmit;return r.a.createElement("form",{onSubmit:n},r.a.createElement(j.a,{name:"price",initialValue:e.price,defaultValue:e.price,label:"Price",component:A,type:"text",placeholder:"Game price",format:function(e){return parseInt(e,10)}}),r.a.createElement(j.a,{name:"status",component:R,initialValue:e.status,options:t}),r.a.createElement(W.a,{minimal:!0,type:"submit",icon:"tick"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}),"pack"!==e.type&&r.a.createElement("form",{onSubmit:function(t){return a.addToPack(e.appId,t)}},r.a.createElement("select",{ref:a.selectRef},r.a.createElement("option",{value:""}),a.props.packages&&a.props.packages.map(function(e){return r.a.createElement("option",{key:e.packId,value:e.packId},e.name)})),r.a.createElement("button",null,"Add to Pack")))},a.selectRef=r.a.createRef(),a.state={isExpanded:!1},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.index,c="pack"===a.type,l=c?a.games:a.dlc;return r.a.createElement("div",null,r.a.createElement("div",{className:_.a.gameWrapper},r.a.createElement(C,{src:a.logo}),r.a.createElement(x,{data:a,index:n,onTitleClick:this.toggleOptions})),r.a.createElement("div",{className:k()(_.a.details,Object(g.a)({},_.a.expanded,this.state.isExpanded))},this.renderOptions(),r.a.createElement("div",{className:_.a.items},!S.isEmpty(l)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,c?"Items in pack:":"DLCs list:"),l.map(function(e){return r.a.createElement("div",{className:_.a.item,key:e.appId||e.name},e.name&&r.a.createElement("div",null,e.name),c?r.a.createElement("div",null,b(e.playtimeForever)):r.a.createElement("div",null,e.price))})),!c&&r.a.createElement("div",{className:_.a.addDlcWrapper},r.a.createElement("h3",null,"Add DLC"),r.a.createElement(j.b,{onSubmit:function(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.props).onAddDlcFormSubmit.apply(t,[a.appId].concat(r))},render:function(e){var t=e.handleSubmit,a=e.reset;return r.a.createElement("form",{onSubmit:function(){return t.apply(void 0,arguments).then(a)}},r.a.createElement(j.a,{name:"dlcName",component:"input",type:"text",placeholder:"DLC name"}),r.a.createElement(j.a,{name:"dlcPrice",component:"input",type:"number",placeholder:"DLC price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}})))))}}]),t}(n.Component),L=a(48),H=a(122),M=a(15),U=a(47),V=(a(97),a(99),a(101),a(103),function(e){var t=e.games;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"twoWeeks"},r.a.createElement("h3",null,"Two weeks leaders:"),t.filter(function(e){return e.playtimeTwoWeeks}).sort(function(e,t){return t.playtimeTwoWeeks-e.playtimeTwoWeeks}).map(function(e){var t=Object(s.a)({},e);return t.playtimeForever=t.playtimeTwoWeeks,t}).map(function(e,t){return r.a.createElement(B,{data:e,index:t},e.name," ",b(e.playtimeTwoWeeks))})))}),K=a(120),X=a(114),Y=function(e){var t=e.isOpen,a=e.onClose,n=e.serverStatus,c=e.onSortChange,l=e.sortedBy,o=e.sortOrder,s=e.onSortOrderChange,i=e.addPack;return r.a.createElement(H.a,{isOpen:t,onClose:a,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:M.a.RIGHT,usePortal:!0,size:H.a.SIZE_SMALL},r.a.createElement("div",{className:U.a.DRAWER_BODY},r.a.createElement("div",{className:U.a.DIALOG_BODY},r.a.createElement("div",{className:"loadingState ".concat(n)}),r.a.createElement(K.a,{label:"Sort by:",onChange:c,selectedValue:l},r.a.createElement(X.a,{label:"Price",value:"totalPrice"}),r.a.createElement(X.a,{label:"Hours",value:"playtimeForever"}),r.a.createElement(X.a,{label:"Price per hour",value:"pricePerHour"})),r.a.createElement(K.a,{label:"Order:",onChange:s,selectedValue:o},r.a.createElement(X.a,{label:"Asc",value:"asc"}),r.a.createElement(X.a,{label:"Desc",value:"desc"})),r.a.createElement(j.b,{onSubmit:i,render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(j.a,{name:"packName",component:"input",type:"text",placeholder:"Package name"}),r.a.createElement(j.a,{name:"packPrice",component:"input",type:"number",placeholder:"Package price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}))))},z="FETCH_GAMES_SUCCESS",Z="gameUpdate",q="FETCH_PACKS_SUCCESS",J=(a(115),a(26)),Q=function(e){return e.games},$=Object(J.a)([function(e){return e.packs},Q],function(e,t){return e.map(function(e){var a=Object(s.a)({},e);return a.games=[],a.type="pack",a.items.forEach(function(e){var n=t.find(function(t){return t.appId===parseInt(e)});n&&a.games.push(n)}),a.playtimeForever=0,a.games&&a.games.length&&(a.games.forEach(function(e){return a.playtimeForever+=e.playtimeForever}),a.logo=a.games[Math.floor(Math.random()*(a.games.length-1))].logo,a.pricePerHour=v(a)),a.totalPrice=a.price,a})}),ee=Object(J.a)([Q],function(e){return e.map(function(e){var t=Object(s.a)({},e);return isNaN(parseInt(t.price))?t.price=0:t.price=parseInt(t.price),t.pricePerHour=v(t),t.totalPrice=function(e){var t=e.price;return e.dlc&&e.dlc.length&&e.dlc.forEach(function(e){return t+=e.price}),t}(t),t})}),te=Object(J.a)([ee,$],function(e,t){return Object(o.a)(e).concat(Object(o.a)(t))}),ae=Object(J.a)([ee],function(e){var t={};return e.forEach(function(e){e.status&&(t[e.status]?t[e.status]=t[e.status]+1:t[e.status]=1)}),t}),ne=Object(J.a)([ee,$],function(e,t){return Object(o.a)(e).concat(Object(o.a)(t)).reduce(function(e,t){return e+t.totalPrice},0)}),re=Object(J.a)([ee,$],function(e,t){return Math.round(Object(o.a)(e).concat(Object(o.a)(t)).reduce(function(e,t){return e+t.playtimeForever},0)/60)}),ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={serverStatus:"",sortedBy:"playtimeForever",sortOrder:"desc",isSettingsOpen:!1,isStatsOpen:!1},a.fetchData=function(){a.props.fetchGames(),a.props.fetchPacks()},a.updateItem=function(e,t){a.setState({serverStatus:"loading"}),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),t).then(function(n){a.props.gameUpdate(Object(s.a)({appId:e},t)),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addDlc=function(e,t){var n=t.dlcName,r=t.dlcPrice,c=a.props.games.find(function(t){return t.appId===e});return a.setState({serverStatus:"loading"}),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{dlc:Object(o.a)(c.dlc).concat([{name:n,price:r}])}).then(function(e){a.props.gameUpdate(e.data),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addPack=function(e){var t=e.packName,a=e.packPrice;E.a.post("http://steamify-api.61hub.com/v1/packs",{name:t,price:a})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.statuses,c=t.totalPrice,l=t.totalPlaytime;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"controls"},r.a.createElement(W.a,{minimal:!0,onClick:function(){return e.setState({isSettingsOpen:!0})},icon:"settings"}),r.a.createElement(W.a,{minimal:!0,onClick:function(){return e.setState({isStatsOpen:!0})},icon:"grouped-bar-chart"}),r.a.createElement(W.a,{minimal:!0,onClick:this.fetchData,icon:"refresh"}),r.a.createElement("div",{className:"stats"},r.a.createElement("p",null,"Total price: ",c,"P"),r.a.createElement("p",null,"Total playtime: ",l,"hrs")),r.a.createElement("div",{className:"statuses"},r.a.createElement("p",null,r.a.createElement(G,{type:"\ud83d\udcd6"}),r.a.createElement("span",null,n.story)),r.a.createElement("p",null,r.a.createElement(G,{type:"\u2705"}),r.a.createElement("span",null,n.completed)),r.a.createElement("p",null,r.a.createElement(G,{type:"\u221e"}),r.a.createElement("span",null,n.endless)),r.a.createElement("p",null,r.a.createElement(G,{type:"\u2620\ufe0f"}),r.a.createElement("span",null,n.abandoned)),r.a.createElement("p",null,r.a.createElement(G,{type:"\ud83d\udd79"}),r.a.createElement("span",null,n.playing)))),r.a.createElement(Y,{isOpen:this.state.isSettingsOpen,onClose:function(){return e.setState({isSettingsOpen:!1})},serverStatus:this.state.serverStatus,onSortChange:function(t){return e.setState({sortedBy:t.currentTarget.value})},sortedBy:this.state.sortedBy,sortOrder:this.state.sortOrder,onSortOrderChange:function(t){return e.setState({sortOrder:t.currentTarget.value})},addPack:this.addPack}),r.a.createElement(H.a,{isOpen:this.state.isStatsOpen,onClose:function(){return e.setState({isStatsOpen:!1})},autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:M.a.RIGHT,usePortal:!0,size:H.a.SIZE_LARGE},r.a.createElement("div",{className:U.a.DRAWER_BODY},r.a.createElement("div",{className:U.a.DIALOG_BODY},r.a.createElement(V,{games:Object(o.a)(this.props.games),packs:Object(o.a)(this.props.packs)})))),r.a.createElement("div",{className:"mainWrapper"},S.orderBy(a,[this.state.sortedBy,"playtimeForever"],[this.state.sortOrder]).filter(function(e){return"hidden"!==e.status}).map(function(t,a){return r.a.createElement(B,{key:t.appId||t.packId,data:t,index:a,onChange:e.updateItem,onAddDlcFormSubmit:e.addDlc,packages:e.props.packs,packId:e.state.packId,onAddedToPack:e.fetchData})})))}}]),t}(n.Component);ce.defaultProps={games:[],packs:[]};var le=Object(L.b)(function(e){return{games:ee(e),packs:$(e),items:te(e),statuses:ae(e),totalPrice:ne(e),totalPlaytime:re(e)}},{fetchGames:function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/games").then(function(t){return e((a=t.data,{type:z,games:a}));var a})}},fetchPacks:function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/packs").then(function(t){return e((a=t.data,{type:q,packs:a}));var a})}},gameUpdate:function(e){return{type:Z,game:e}}})(ce),oe=a(18),se=a(56),ie=Object(oe.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return t.games;case Z:return e.map(function(e){return e.appId===t.game.appId?Object(s.a)({},e,t.game):e});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.packs;default:return e}}}),me=window.__REDUX_DEVTOOLS_EXTENSION__?Object(oe.d)(Object(oe.a)(se.a),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(oe.a)(se.a),pe=Object(oe.e)(ie,me);l.a.render(r.a.createElement(L.a,{store:pe},r.a.createElement(le,null)),document.getElementById("root"))},16:function(e,t,a){e.exports={gameInformation:"GameDetails_gameInformation__1y36Q",gameName:"GameDetails_gameName__1d1pq",gameMinorInfo:"GameDetails_gameMinorInfo__Uu8Kq",gameIndex:"GameDetails_gameIndex__1jUn9",gameHourPrice:"GameDetails_gameHourPrice__1d1m7",darkGreen:"GameDetails_darkGreen__YMiVp",green:"GameDetails_green__2e0DP",orange:"GameDetails_orange__39u1Q",red:"GameDetails_red__3WLRP",yellow:"GameDetails_yellow__2fyEK",status:"GameDetails_status__1xE9k",endless:"GameDetails_endless__HlE1L",gameDuration:"GameDetails_gameDuration__VZ_WH"}},22:function(e,t,a){e.exports={gameWrapper:"Game_gameWrapper__2AG3X",options:"Game_options__oRGaS",items:"Game_items__FCx4C",item:"Game_item__3-19d",details:"Game_details__3t6zl",expanded:"Game_expanded__3K6Ps",addDlcWrapper:"Game_addDlcWrapper__jxUtc"}},61:function(e,t,a){e.exports={logoWrapper:"GameLogo_logoWrapper__2duNv"}},66:function(e,t,a){e.exports=a(116)}},[[66,2,1]]]);
//# sourceMappingURL=main.5eb9c89c.chunk.js.map