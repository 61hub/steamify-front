(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports={logoWrapper:"GameLogo_logoWrapper__2duNv"}},136:function(e,t,a){e.exports=a(245)},15:function(e,t,a){e.exports={gameInformation:"GameDetails_gameInformation__1y36Q",pricePerHour:"GameDetails_pricePerHour__3zZ8S",gameName:"GameDetails_gameName__1d1pq",gameMinorInfo:"GameDetails_gameMinorInfo__Uu8Kq",gameHourPrice:"GameDetails_gameHourPrice__1d1m7",darkGreen:"GameDetails_darkGreen__YMiVp",green:"GameDetails_green__2e0DP",orange:"GameDetails_orange__39u1Q",red:"GameDetails_red__3WLRP",yellow:"GameDetails_yellow__2fyEK",status:"GameDetails_status__1xE9k",endless:"GameDetails_endless__HlE1L",gameDuration:"GameDetails_gameDuration__VZ_WH"}},175:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=a(12),s=a(34),l=a(61),m=a(62),u=a(70),p=a(63),d=a(71),f=a(16),g=a.n(f),h=a(60),E=a(35),v=function(e){var t=0;if(!e.items&&e.dlc.length>0&&e.dlc.forEach(function(e){t+=e.price}),"pack"===e.type){var a=0;return e.games.forEach(function(e){return a+=e.playtimeForever}),a<=60?e.price:Math.round(e.price/(a/60))}if(e.playtimeForever<=60)return e.price+t;var n=e.playtimeForever/60;return(e.price+t)/n},b=function(e){var t=Math.floor(e/60),a=e%60;return a>10&&a.toString().length<2&&(a*=10),t?a?"".concat(t,"h ").concat(a,"m"):"".concat(t,"h"):"".concat(a,"m")},y=a(25),_=a.n(y),O=a(3),k=a.n(O),S=a(46),P=a(14),j=a(121),D=a.n(j),C=function(e){var t=e.src;return r.a.createElement("div",{className:D.a.logoWrapper},r.a.createElement("img",{src:t,alt:"Game logo"}))},I=a(15),G=a.n(I),N=function(e){var t=e.type,a=Object(E.a)(e,["type"]);return r.a.createElement("span",Object.assign({role:"img","aria-label":"emoji"},a),t)},x=function(e){var t=e.data,a=(t=void 0===t?{}:t).status,n=t.totalPrice,c=t.name,o=Object(E.a)(t,["status","totalPrice","name"]),i=e.index,s=e.onTitleClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:G.a.gameInformation},r.a.createElement("div",{className:G.a.gameName,onClick:s},c),r.a.createElement("div",{className:G.a.gameMinorInfo},r.a.createElement("div",{className:k()(G.a.gameHourPrice,G.a[function(e){var t=v(e);return t<=10?"darkGreen":t<=50?"green":t<=100?"yellow":t<=200?"orange":t>=200?"red":void 0}(o)])}),r.a.createElement("div",{className:G.a.gameIndex},i+1,"."),r.a.createElement("div",null,n,"P"),!S.isNil(o.pricePerHour)&&r.a.createElement("div",{className:G.a.pricePerHour},o.pricePerHour.toFixed(0),"P/hr"))),r.a.createElement("div",{className:G.a.gameDuration},r.a.createElement("div",{className:G.a.status},"completed"===a&&r.a.createElement(N,{type:"\u2705"}),"endless"===a&&r.a.createElement(N,{type:"\u221e",className:G.a.endless}),"playing"===a&&r.a.createElement(N,{type:"\ud83d\udd79"}),"abandoned"===a&&r.a.createElement(N,{type:"\u2620\ufe0f"}),"story"===a&&r.a.createElement(N,{type:"\ud83d\udcd6"})),b(o.playtimeForever)))},w=a(247),F=a(252),T=a(248),H=a(90),W=function(e){var t=e.label,a=e.placeholder,n=e.helperText,c=void 0===n?"":n,o=e.input,i=Object(E.a)(e,["label","placeholder","helperText","input"]);return r.a.createElement(w.a,{helperText:c,label:t,labelFor:"field-".concat(t)},r.a.createElement(F.a,Object.assign({id:"field-".concat(t),placeholder:a||t,onValueChange:o.onChange},o,i)))},A=function(e){var t=e.input,a=e.options;Object(E.a)(e,["input","options"]);return r.a.createElement(w.a,{label:"Game Status",labelFor:"field-status"},r.a.createElement(T.a,Object.assign({options:a,id:"field-status"},t)))},L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggleOptions=function(){a.setState({isExpanded:!a.state.isExpanded})},a.addToPack=function(e,t){t.preventDefault();var n=a.selectRef.current.options[a.selectRef.current.selectedIndex].value,r=a.props.packages.find(function(e){return e.packId===n});g.a.patch("http://steamify-api.61hub.com/v1/packs/".concat(n),{items:Object(i.a)(r.items).concat([e])}).then(function(){a.props.onAddedToPack(),a.onChange({status:"hidden"})})},a.onChange=function(){var e=a.props,t=e.onChange,n=e.data;a.toggleOptions();for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return t.apply(void 0,[n.appId].concat(c))},a.renderOptions=function(){var e=a.props.data,t=["default","playing","completed","endless","abandoned","hidden","story"];return r.a.createElement("div",{className:_.a.options},r.a.createElement(P.b,{onSubmit:function(){var e;return(e=a).onChange.apply(e,arguments)},render:function(a){var n=a.handleSubmit;return r.a.createElement("form",{onSubmit:n},r.a.createElement(P.a,{name:"price",initialValue:e.price,defaultValue:e.price,label:"Price",component:W,type:"text",placeholder:"Game price",format:function(e){return parseInt(e,10)}}),r.a.createElement(P.a,{name:"status",component:A,initialValue:e.status,options:t}),r.a.createElement(H.a,{minimal:!0,type:"submit",icon:"tick"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}),"pack"!==e.type&&r.a.createElement("form",{onSubmit:function(t){return a.addToPack(e.appId,t)}},r.a.createElement("select",{ref:a.selectRef},r.a.createElement("option",{value:""}),a.props.packages&&a.props.packages.map(function(e){return r.a.createElement("option",{key:e.packId,value:e.packId},e.name)})),r.a.createElement("button",null,"Add to Pack")))},a.selectRef=r.a.createRef(),a.state={isExpanded:!1},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.index,c="pack"===a.type,o=c?a.games:a.dlc;return r.a.createElement("div",null,r.a.createElement("div",{className:_.a.gameWrapper},r.a.createElement(C,{src:a.logo}),r.a.createElement(x,{data:a,index:n,onTitleClick:this.toggleOptions})),r.a.createElement("div",{className:k()(_.a.details,Object(h.a)({},_.a.expanded,this.state.isExpanded))},this.renderOptions(),r.a.createElement("div",{className:_.a.items},!S.isEmpty(o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,c?"Items in pack:":"DLCs list:"),o.map(function(e){return r.a.createElement("div",{className:_.a.item,key:e.appId||e.name},e.name&&r.a.createElement("div",null,e.name),c?r.a.createElement("div",null,b(e.playtimeForever)):r.a.createElement("div",null,e.price))})),!c&&r.a.createElement("div",{className:_.a.addDlcWrapper},r.a.createElement("h3",null,"Add DLC"),r.a.createElement(P.b,{onSubmit:function(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.props).onAddDlcFormSubmit.apply(t,[a.appId].concat(r))},render:function(e){var t=e.handleSubmit,a=e.reset;return r.a.createElement("form",{onSubmit:function(){return t.apply(void 0,arguments).then(a)}},r.a.createElement(P.a,{name:"dlcName",component:"input",type:"text",placeholder:"DLC name"}),r.a.createElement(P.a,{name:"dlcPrice",component:"input",type:"number",placeholder:"DLC price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}})))))}}]),t}(n.Component),M=a(68),R=(a(167),a(169),a(171),a(173),a(175),a(254)),B=a(256),U=function(e){return e.games.filter(function(e){return e.playtimeTwoWeeks}).sort(function(e,t){return t.playtimeTwoWeeks-e.playtimeTwoWeeks}).map(function(e,t){var a=e.name,n=e.playtimeTwoWeeks,c=e.logo;return r.a.createElement(R.a,{gutter:[5,12],type:"flex",align:"center",style:{color:"white"}},r.a.createElement(B.a,{span:2},t+1,"."),r.a.createElement(B.a,{span:4},b(n)),r.a.createElement(B.a,{span:4},r.a.createElement("img",{style:{width:"100%"},src:c,alt:"Game logo"})),r.a.createElement(B.a,{span:14,style:{textOverflow:"hidden",wordWrap:"no-wrap"}},r.a.createElement("span",null,a)))})},V=a(253),z=a(32),K=a(87),X=a(249),Y=a(193),Z=function(e){var t=e.isOpen,a=e.onClose,n=e.serverStatus,c=e.onSortChange,o=e.sortedBy,i=e.sortOrder,s=e.onSortOrderChange,l=e.addPack;return r.a.createElement(V.a,{isOpen:t,onClose:a,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:z.a.RIGHT,usePortal:!0,size:V.a.SIZE_SMALL},r.a.createElement("div",{className:K.a.DRAWER_BODY},r.a.createElement("div",{className:K.a.DIALOG_BODY},r.a.createElement("div",{className:"loadingState ".concat(n)}),r.a.createElement(X.a,{label:"Sort by:",onChange:c,selectedValue:o},r.a.createElement(Y.a,{label:"Price",value:"totalPrice"}),r.a.createElement(Y.a,{label:"Hours",value:"playtimeForever"}),r.a.createElement(Y.a,{label:"Price per hour",value:"pricePerHour"})),r.a.createElement(X.a,{label:"Order:",onChange:s,selectedValue:i},r.a.createElement(Y.a,{label:"Asc",value:"asc"}),r.a.createElement(Y.a,{label:"Desc",value:"desc"})),r.a.createElement(P.b,{onSubmit:l,render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(P.a,{name:"packName",component:"input",type:"text",placeholder:"Package name"}),r.a.createElement(P.a,{name:"packPrice",component:"input",type:"number",placeholder:"Package price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}))))},q="FETCH_GAMES_SUCCESS",J="gameUpdate",Q="FETCH_PACKS_SUCCESS",$=(a(194),a(37)),ee=function(e){return e.games},te=Object($.a)([function(e){return e.packs},ee],function(e,t){return e.map(function(e){var a=Object(s.a)({},e);return a.games=[],a.type="pack",a.items.forEach(function(e){var n=t.find(function(t){return t.appId===parseInt(e)});n&&a.games.push(n)}),a.playtimeForever=0,a.games&&a.games.length&&(a.games.forEach(function(e){return a.playtimeForever+=e.playtimeForever}),a.logo=a.games[Math.floor(Math.random()*(a.games.length-1))].logo,a.pricePerHour=v(a),console.log(a,a.pricePerHour)),a.totalPrice=a.price,a})}),ae=Object($.a)([ee],function(e){return e.map(function(e){var t=Object(s.a)({},e);return isNaN(parseInt(t.price))?t.price=0:t.price=parseInt(t.price),t.pricePerHour=v(t),t.totalPrice=function(e){var t=e.price;return e.dlc&&e.dlc.length&&e.dlc.forEach(function(e){return t+=e.price}),t}(t),t})}),ne=Object($.a)([ae,te],function(e,t){return Object(i.a)(e).concat(Object(i.a)(t))}),re=Object($.a)([ae],function(e){var t={};return e.forEach(function(e){e.status&&(t[e.status]?t[e.status]=t[e.status]+1:t[e.status]=1)}),t}),ce=Object($.a)([ae,te],function(e,t){return Object(i.a)(e).concat(Object(i.a)(t)).reduce(function(e,t){return e+t.totalPrice},0)}),oe=Object($.a)([ae,te],function(e,t){return Math.round(Object(i.a)(e).concat(Object(i.a)(t)).reduce(function(e,t){return e+t.playtimeForever},0)/60)}),ie=a(255),se=a(250),le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={serverStatus:"",sortedBy:"playtimeForever",sortOrder:"desc",isSettingsOpen:!1,isStatsOpen:!1},a.fetchData=function(){a.props.fetchGames(),a.props.fetchPacks()},a.updateItem=function(e,t){a.setState({serverStatus:"loading"}),g.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),t).then(function(n){a.props.gameUpdate(Object(s.a)({appId:e},t)),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addDlc=function(e,t){var n=t.dlcName,r=t.dlcPrice,c=a.props.games.find(function(t){return t.appId===e});return a.setState({serverStatus:"loading"}),g.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{dlc:Object(i.a)(c.dlc).concat([{name:n,price:r}])}).then(function(e){a.props.gameUpdate(e.data),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addPack=function(e){var t=e.packName,a=e.packPrice;g.a.post("http://steamify-api.61hub.com/v1/packs",{name:t,price:a})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.items;t.statuses,t.totalPrice,t.totalPlaytime;return r.a.createElement(R.a,null,r.a.createElement(B.a,{md:2,sm:24},r.a.createElement(ie.a,{offsetTop:15,style:{marginLeft:15}},r.a.createElement(se.a.Group,null,r.a.createElement(se.a,{type:"primary",size:"small",onClick:function(){return e.setState({isSettingsOpen:!0})},icon:"setting"}),r.a.createElement(se.a,{type:"primary",size:"small",onClick:this.fetchData,icon:"sync"})))),r.a.createElement(Z,{isOpen:this.state.isSettingsOpen,onClose:function(){return e.setState({isSettingsOpen:!1})},serverStatus:this.state.serverStatus,onSortChange:function(t){return e.setState({sortedBy:t.currentTarget.value})},sortedBy:this.state.sortedBy,sortOrder:this.state.sortOrder,onSortOrderChange:function(t){return e.setState({sortOrder:t.currentTarget.value})},addPack:this.addPack}),r.a.createElement(B.a,{sm:24,md:13},S.orderBy(a,[this.state.sortedBy,"playtimeForever"],[this.state.sortOrder]).filter(function(e){return"hidden"!==e.status}).map(function(t,a){return r.a.createElement(L,{key:t.appId||t.packId,data:t,index:a,onChange:e.updateItem,onAddDlcFormSubmit:e.addDlc,packages:e.props.packs,packId:e.state.packId,onAddedToPack:e.fetchData})})),r.a.createElement(B.a,{sm:24,md:6,offset:1},r.a.createElement(ie.a,{offset:15},r.a.createElement(U,{games:Object(i.a)(this.props.games)}))))}}]),t}(n.Component);le.defaultProps={games:[],packs:[]};var me=Object(M.b)(function(e){return{games:ae(e),packs:te(e),items:ne(e),statuses:re(e),totalPrice:ce(e),totalPlaytime:oe(e)}},{fetchGames:function(){return function(e){return g.a.get("http://steamify-api.61hub.com/v1/games").then(function(t){return e((a=t.data,{type:q,games:a}));var a})}},fetchPacks:function(){return function(e){return g.a.get("http://steamify-api.61hub.com/v1/packs").then(function(t){return e((a=t.data,{type:Q,packs:a}));var a})}},gameUpdate:function(e){return{type:J,game:e}}})(le),ue=a(18),pe=a(95),de=Object(ue.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.games;case J:return e.map(function(e){return e.appId===t.game.appId?Object(s.a)({},e,t.game):e});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return t.packs;default:return e}}}),fe=window.__REDUX_DEVTOOLS_EXTENSION__?Object(ue.d)(Object(ue.a)(pe.a),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(ue.a)(pe.a),ge=Object(ue.e)(de,fe);o.a.render(r.a.createElement(M.a,{store:ge},r.a.createElement(me,null)),document.getElementById("root"))},25:function(e,t,a){e.exports={gameWrapper:"Game_gameWrapper__2AG3X",options:"Game_options__oRGaS",items:"Game_items__FCx4C",item:"Game_item__3-19d",details:"Game_details__3t6zl",expanded:"Game_expanded__3K6Ps",addDlcWrapper:"Game_addDlcWrapper__jxUtc"}}},[[136,2,1]]]);
//# sourceMappingURL=main.28f2d96d.chunk.js.map