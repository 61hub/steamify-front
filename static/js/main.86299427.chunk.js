(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),s=t.n(c),i=(t(61),t(11)),o=t(10),l=t(33),m=t.n(l),u=t(47),p=t(23),d=t(24),f=t(27),h=t(25),v=t(28),g=t(12),E=t.n(g),b=function(e){var a=0;if(!e.items&&e.dlc.length>0&&e.dlc.forEach(function(e){a+=e.price}),"pack"===e.type){var t=0;return console.log(e.games),e.games.forEach(function(e){return t+=e.playtimeForever}),t<=60?e.price:(console.log(e.price,t/60),Math.round(e.price/t/60))}if(e.playtimeForever<=60)return e.price+a;var n=e.playtimeForever/60;return(e.price+a)/n},k=function(e){var a=Math.floor(e/60),t=e%60;return t>10&&t.toString().length<2&&(t*=10),a?t?"".concat(a,"h ").concat(t,"m"):"".concat(a,"h"):"".concat(t,"m")},O=function(e){var a=e.price;return e.dlc&&e.dlc.length&&e.dlc.forEach(function(e){return a+=e.price}),a},y=function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(f.a)(this,Object(h.a)(a).call(this,e))).handleInputSubmit=function(e,a){13===e.keyCode?t.props.saveData(a,t.state.value):t.setState({value:e.target.value})},t.handleDlc=function(e,a){13===e.keyCode&&t.props.saveDataDlc(a,t.dlcNameRef.current.value,t.dlcPriceRef.current.value)},t.definePriceHourClassName=function(e){var a=b(e);return a<=10?"darkGreen":a<=50?"green":a<=100?"yellow":a<=200?"orange":a>=200?"red":void 0},t.hideGame=function(e){t.setState({gameClassName:"hide",hidden:!0},function(){E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{hidden:t.state.hidden})})},t.openDlc=function(e){"dlcWrapper"==t.state.dlcClassName?t.setState({dlcClassName:"dlcWrapperHidden"}):t.setState({dlcClassName:"dlcWrapper"})},t.patchSubmitedData=function(e,a){a.preventDefault();e.toString();var n=t.selectRef.current.options[t.selectRef.current.selectedIndex].value,r=t.props.packages.find(function(e){return e.packId==n});E.a.patch("http://steamify-api.61hub.com/v1/packs/".concat(n),{items:Object(o.a)(r.items).concat([e])}).then(function(){t.props.onAddedToPack(),t.hideGame(e)})},t.dlcNameRef=r.a.createRef(),t.dlcPriceRef=r.a.createRef(),t.selectRef=r.a.createRef(),t.state={value:"",hidden:e.data.hidden,dlcClassName:"dlcWrapperHidden"},t}return Object(v.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this,a=this.props.data,t=O(a);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gameWrapper ".concat(this.state.hidden?"hidden":"")},r.a.createElement("div",{className:"gameIcon"},r.a.createElement("img",{src:a.logo})),r.a.createElement("div",{className:"gameInformation"},r.a.createElement("div",{className:"gameName",onClick:function(a){return e.openDlc(a)}},a.name),r.a.createElement("div",{className:"gameMinorInfo"},r.a.createElement("div",{className:"gameHourPrice ".concat(this.definePriceHourClassName(a))}),r.a.createElement("div",{className:"gameIndex"},"#",this.props.index+1),r.a.createElement("div",{className:"gameTotalPrice"},t,"P"))),r.a.createElement("div",{className:"gameDuration"},k(a.playtimeForever))),r.a.createElement("div",{className:"".concat(this.state.dlcClassName," options")},r.a.createElement("div",null,r.a.createElement("input",{className:"priceInput",defaultValue:a.price,type:"number",onKeyUp:function(t){return e.handleInputSubmit(t,a.appId,a.playtimeForever)}})),r.a.createElement("div",{className:"hideButton"},r.a.createElement("button",{onClick:function(){return e.hideGame(a.appId)}},"Hide")),r.a.createElement("div",{className:"dropDownPacks"},"pack"!==a.type&&r.a.createElement("form",{onSubmit:function(t){return e.patchSubmitedData(a.appId,t)}},r.a.createElement("select",{ref:this.selectRef},this.props.packages&&this.props.packages.map(function(e){return r.a.createElement("option",{value:e.packId},e.name)})),r.a.createElement("button",null,"Package")))),r.a.createElement("div",{className:this.state.dlcClassName},"pack"===a.type?r.a.createElement("div",{className:"packWrapper"},a.games.map(function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.name),r.a.createElement("div",null,k(e.playtimeForever)))})):r.a.createElement(r.a.Fragment,null,a.dlc&&a.dlc.map(function(e){return r.a.createElement("div",{className:"dlc"},r.a.createElement("div",{className:"dlcName"},e.name),r.a.createElement("div",null,e.price))}),r.a.createElement("div",null,r.a.createElement("input",{className:"dlcInput",placeholder:"DLC name",type:"text",onKeyUp:function(t){return e.handleDlc(t,a.appId)},ref:this.dlcNameRef})),r.a.createElement("div",null,r.a.createElement("input",{className:"dlcInput",placeholder:"DLC price",type:"text",onKeyUp:function(t){return e.handleDlc(t,a.appId)},ref:this.dlcPriceRef})))))}}]),a}(n.Component),N=t(48),S=t(26),I=t(19),D=t(50),j="packsFetched",R="gamesFetched",C=function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/packs").then(function(a){return e((t=a.data,{type:j,packs:t}));var t})}},w=function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/games").then(function(a){return e((t=a.data,{type:R,games:t}));var t})}},P=Object(I.d)(function(e,a){switch(a.type){case R:return a.games.forEach(function(e){isNaN(parseInt(e.price))?e.price=0:e.price=parseInt(e.price),e.pricePerHour=b(e)}),Object(i.a)({},e,{games:a.games});case j:var t=a.packs;return t.forEach(function(a){a.games=[],a.type="pack",a.items.forEach(function(t){var n=e.games.find(function(e){return e.appId===parseInt(t)});n&&a.games.push(n)}),a.playtimeForever=0,a.games&&a.games.length&&(a.games.forEach(function(e){return a.playtimeForever+=e.playtimeForever}),a.logo=a.games[Math.floor(Math.random()*(a.games.length-1))].logo,a.pricePerHour=b(a))}),Object(i.a)({},e,{packs:t});case"dataFetched":return Object(i.a)({},e,{games:a.data});case"gamesToStore":return Object(i.a)({},e,{games:Object(o.a)(e.games).concat(Object(o.a)(a.data))});case"gameUpdate":var n=e.games.map(function(e){return e.appId===a.game.appId?Object(i.a)({},e,a.game):e});return Object(i.a)({},e,{games:n});case"packsToStore":return Object(i.a)({},e,{games:Object(o.a)(e.games).concat(Object(o.a)(a.packs))})}return{games:[],packs:[]}},Object(I.c)(Object(I.a)(D.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),F=t(108),T=t(112),_=t(9),W=t(96),B=t(111),G=t(106),x=(t(88),t(90),t(92),t(94),function(e){var a=e.games,t=e.packs,n=0,c=0;return a.forEach(function(e){e.hidden||(n+=O(e),c+=e.playtimeForever)}),t.forEach(function(e){n+=e.price,c+=e.playtimeForever}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats"},r.a.createElement("div",null,"Total price: ".concat(n,"P")),r.a.createElement("div",null,"Total playtime: ".concat(Math.round(c/60),"hrs"))),r.a.createElement("div",{className:"twoWeeks"},r.a.createElement("h3",null,"Two weeks leaders:"),a.filter(function(e){return e.playtimeTwoWeeks}).sort(function(e,a){return a.playtimeTwoWeeks-e.playtimeTwoWeeks}).map(function(e){var a=Object(i.a)({},e);return a.playtimeForever=a.playtimeTwoWeeks,a}).map(function(e,a){return r.a.createElement(y,{data:e,index:a},e.name," ",k(e.playtimeTwoWeeks))})))}),H=function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(f.a)(this,Object(h.a)(a).call(this,e))).fetchData=Object(u.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.fetchGames();case 2:return e.next=4,t.props.fetchPacks();case 4:case"end":return e.stop()}},e,this)})),t.saveData=function(e,a){t.setState({serverStatus:"loading"}),a=parseInt(a),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{price:a}).then(function(e){return t.setState({serverStatus:"success"})}).catch(function(e){return t.setState({serverStatus:"error"})}),t.props.gameUpdate({appId:e,price:a})},t.saveDataDlc=function(e,a,n){var r=Object(o.a)(t.props.games),c=r.find(function(a){return a.appId==e});t.setState({serverStatus:"loading"}),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{dlc:Object(o.a)(c.dlc).concat([{name:a,price:n}])}).then(function(e){return t.setState({serverStatus:"success"})}).catch(function(e){return t.setState({serverStatus:"error"})});var s=r.findIndex(function(a){return a.appId==e}),l=Object(i.a)({},c);l.dlc=Object(o.a)(l.dlc).concat([{name:a,price:n}]),r[s]=l,t.props.dispatchGamesToStore(r)},t.handleRefreshButton=function(){t.fetchGamesData()},t.addPack=function(e){e.preventDefault();var a=t.formInputNameRef.current.value,n=t.formInputPriceRef.current.value;E.a.post("http://steamify-api.61hub.com/v1/packs",{name:a,price:n})},t.formInputNameRef=r.a.createRef(),t.formInputPriceRef=r.a.createRef(),t.state={serverStatus:"",sortedBy:"playtimeForever",sortOrder:"desc",isSettingsOpen:!1,isStatsOpen:!1},t}return Object(v.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,a=this.props,t=a.games,n=a.packs;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"controls"},r.a.createElement(F.a,{className:"bp3-minimal",onClick:function(){return e.setState({isSettingsOpen:!0})},icon:"settings"}),r.a.createElement(F.a,{className:"bp3-minimal",onClick:function(){return e.setState({isStatsOpen:!0})},icon:"grouped-bar-chart"}),r.a.createElement(F.a,{className:"bp3-minimal",onClick:this.fetchData,icon:"refresh"})),r.a.createElement(T.a,{isOpen:this.state.isSettingsOpen,onClose:function(){return e.setState({isSettingsOpen:!1})},autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:_.a.RIGHT,usePortal:!0,size:T.a.SIZE_SMALL},r.a.createElement("div",{className:W.a.DRAWER_BODY},r.a.createElement("div",{className:W.a.DIALOG_BODY},r.a.createElement("div",{className:"loadingState ".concat(this.state.serverStatus)}),r.a.createElement(B.a,{label:"Sort by:",onChange:function(a){return e.setState({sortedBy:a.currentTarget.value})},selectedValue:this.state.sortedBy},r.a.createElement(G.a,{label:"Price",value:"price"}),r.a.createElement(G.a,{label:"Hours",value:"playtimeForever"}),r.a.createElement(G.a,{label:"Price per hour",value:"pricePerHour"})),r.a.createElement(B.a,{label:"Order:",onChange:function(a){return e.setState({sortOrder:a.currentTarget.value})},selectedValue:this.state.sortOrder},r.a.createElement(G.a,{label:"Asc",value:"asc"}),r.a.createElement(G.a,{label:"Desc",value:"desc"})),r.a.createElement("form",{onSubmit:this.addPack},r.a.createElement("input",{type:"text",placeholder:"Package name",ref:this.formInputNameRef}),r.a.createElement("input",{type:"number",placeholder:"Package price",ref:this.formInputPriceRef}),r.a.createElement("button",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))),r.a.createElement(T.a,{isOpen:this.state.isStatsOpen,onClose:function(){return e.setState({isStatsOpen:!1})},autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:_.a.RIGHT,usePortal:!0,size:T.a.SIZE_LARGE},r.a.createElement("div",{className:W.a.DRAWER_BODY},r.a.createElement("div",{className:W.a.DIALOG_BODY},r.a.createElement(x,{games:Object(o.a)(this.props.games),packs:Object(o.a)(this.props.packs)})))),r.a.createElement("div",{className:"mainWrapper"},N.orderBy(Object(o.a)(n).concat(Object(o.a)(t)),[this.state.sortedBy,"playtimeForever"],[this.state.sortOrder]).filter(function(e){return!e.hidden}).map(function(a,t){return r.a.createElement(y,{key:a.appId,data:a,index:t,saveData:e.saveData,saveDataDlc:e.saveDataDlc,packages:e.props.games.filter(function(e){return e.items}),packId:e.state.packId,onAddedToPack:e.fetchGamesData})})))}}]),a}(n.Component),A=Object(S.b)(function(e){return{games:e.games,packs:e.packs}},function(e){return{fetchGames:function(){return e(w())},fetchPacks:function(){return e(C())},gameUpdate:function(a){e({type:"gameUpdate",game:a})},dispatchGamesToStore:function(a){e({data:a,type:"gamesToStore"})}}})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(S.a,{store:P},r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e,a,t){e.exports=t(107)},61:function(e,a,t){},94:function(e,a,t){}},[[56,2,1]]]);
//# sourceMappingURL=main.86299427.chunk.js.map