(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),s=a(21),i=a(13),l=a(39),m=a.n(l),p=a(56),u=a(28),d=a(29),f=a(33),h=a(30),v=a(34),E=a(11),g=a.n(E),b=a(24),O=function(e){var t=0;if(!e.items&&e.dlc.length>0&&e.dlc.forEach(function(e){t+=e.price}),"pack"===e.type){var a=0;return e.games.forEach(function(e){return a+=e.playtimeForever}),a<=60?e.price:Math.round(e.price/a/60)}if(e.playtimeForever<=60)return e.price+t;var n=e.playtimeForever/60;return(e.price+t)/n},S=function(e){var t=Math.floor(e/60),a=e%60;return a>10&&a.toString().length<2&&(a*=10),t?a?"".concat(t,"h ").concat(a,"m"):"".concat(t,"h"):"".concat(a,"m")},k=function(e){var t=e.price;return e.dlc&&e.dlc.length&&e.dlc.forEach(function(e){return t+=e.price}),t},y=a(9),C=a.n(y),_=a(6),N=a.n(_),I=a(31),P=a(12),D=a(90),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).definePriceHourClassName=function(e){var t=O(e);return t<=10?"darkGreen":t<=50?"green":t<=100?"yellow":t<=200?"orange":t>=200?"red":void 0},a.hide=function(){var e=a.props.data.appId;a.props.onChange(e,{hidden:!0})},a.toggleOptions=function(){a.setState({isExpanded:!a.state.isExpanded})},a.patchSubmitedData=function(e,t){t.preventDefault();e.toString();var n=a.selectRef.current.options[a.selectRef.current.selectedIndex].value,r=a.props.packages.find(function(e){return e.packId===n});g.a.patch("http://steamify-api.61hub.com/v1/packs/".concat(n),{items:Object(s.a)(r.items).concat([e])}).then(function(){a.props.onAddedToPack(),a.hide()})},a.onChangeCompleted=function(e){a.setState({isCompleted:!a.state.isCompleted},function(){a.props.onChange(a.props.data.appId,{completed:a.state.isCompleted})})},a.renderOptions=function(){var e=a.props.data;return r.a.createElement("div",{className:C.a.options},r.a.createElement("div",null,"Item price:",r.a.createElement(P.b,{onSubmit:function(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=a.props).onPriceChange.apply(t,[e.appId].concat(r))},render:function(t){var a=t.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(P.a,{name:"price",initialValue:e.price,component:"input",type:"text",placeholder:"DLC name",format:function(e){return parseInt(e,10)}}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}})),r.a.createElement("div",{className:"hideButton"},r.a.createElement("button",{onClick:a.hide},"Hide")),r.a.createElement(D.b,{checked:a.state.isCompleted,label:"Completed",onChange:a.onChangeCompleted}),r.a.createElement("div",{className:"dropDownPacks"},"pack"!==e.type&&r.a.createElement("form",{onSubmit:function(t){return a.patchSubmitedData(e.appId,t)}},r.a.createElement("select",{ref:a.selectRef},a.props.packages&&a.props.packages.map(function(e){return r.a.createElement("option",{value:e.packId},e.name)})),r.a.createElement("button",null,"Package"))))},a.selectRef=r.a.createRef(),a.state={isExpanded:!1,isCompleted:e.data.completed},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.state.hidden,n="pack"===t.type,c=n?t.games:t.dlc;return r.a.createElement("div",{className:N()(Object(b.a)({},C.a.completed,t.completed))},r.a.createElement("div",{className:N()(C.a.gameWrapper,Object(b.a)({},C.a.hidden,a))},r.a.createElement("div",{className:C.a.gameIcon},r.a.createElement("img",{src:t.logo,alt:"Image logo"})),r.a.createElement("div",{className:"gameInformation"},r.a.createElement("div",{className:"gameName",onClick:this.toggleOptions},t.name),r.a.createElement("div",{className:"gameMinorInfo"},r.a.createElement("div",{className:"gameHourPrice ".concat(this.definePriceHourClassName(t))}),r.a.createElement("div",{className:"gameIndex"},"#",this.props.index+1),r.a.createElement("div",null,t.totalPrice,"P"))),r.a.createElement("div",{className:C.a.gameDuration},S(t.playtimeForever))),r.a.createElement("div",{className:N()(C.a.details,Object(b.a)({},C.a.expanded,this.state.isExpanded))},this.renderOptions(),r.a.createElement("div",{className:C.a.items},!I.isEmpty(c)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,n?"Items in pack:":"DLCs list:"),c.map(function(e){return r.a.createElement("div",{className:C.a.item},e.name&&r.a.createElement("div",null,e.name),n?r.a.createElement("div",null,S(e.playtimeForever)):r.a.createElement("div",null,e.price))})),!n&&r.a.createElement("div",{className:C.a.addDlcWrapper},r.a.createElement("h3",null,"Add DLC"),r.a.createElement(P.b,{onSubmit:function(){for(var a,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=e.props).onAddDlcFormSubmit.apply(a,[t.appId].concat(r))},render:function(e){var t=e.handleSubmit,a=e.reset;return r.a.createElement("form",{onSubmit:function(){return t.apply(void 0,arguments).then(a)}},r.a.createElement(P.a,{name:"dlcName",component:"input",type:"text",placeholder:"DLC name"}),r.a.createElement(P.a,{name:"dlcPrice",component:"input",type:"number",placeholder:"DLC price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}})))))}}]),t}(n.Component),w=a(32),F=a(115),G=a(118),x=a(14),T=a(112),A=(a(95),a(97),a(99),a(101),function(e){var t=e.games,a=e.packs,n=0,c=0;return t.forEach(function(e){e.hidden||(n+=k(e),c+=e.playtimeForever)}),a.forEach(function(e){n+=e.price,c+=e.playtimeForever}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats"},r.a.createElement("div",null,"Total price: ".concat(n,"P")),r.a.createElement("div",null,"Total playtime: ".concat(Math.round(c/60),"hrs"))),r.a.createElement("div",{className:"twoWeeks"},r.a.createElement("h3",null,"Two weeks leaders:"),t.filter(function(e){return e.playtimeTwoWeeks}).sort(function(e,t){return t.playtimeTwoWeeks-e.playtimeTwoWeeks}).map(function(e){var t=Object(i.a)({},e);return t.playtimeForever=t.playtimeTwoWeeks,t}).map(function(e,t){return r.a.createElement(j,{data:e,index:t},e.name," ",S(e.playtimeTwoWeeks))})))}),B=a(117),R=function(e){var t=e.isOpen,a=e.onClose,n=e.serverStatus,c=e.onSortChange,o=e.sortedBy,s=e.sortOrder,i=e.onSortOrderChange,l=e.addPack;return r.a.createElement(G.a,{isOpen:t,onClose:a,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:x.a.RIGHT,usePortal:!0,size:G.a.SIZE_SMALL},r.a.createElement("div",{className:T.a.DRAWER_BODY},r.a.createElement("div",{className:T.a.DIALOG_BODY},r.a.createElement("div",{className:"loadingState ".concat(n)}),r.a.createElement(B.a,{label:"Sort by:",onChange:c,selectedValue:o},r.a.createElement(D.a,{label:"Price",value:"totalPrice"}),r.a.createElement(D.a,{label:"Hours",value:"playtimeForever"}),r.a.createElement(D.a,{label:"Price per hour",value:"pricePerHour"})),r.a.createElement(B.a,{label:"Order:",onChange:i,selectedValue:s},r.a.createElement(D.a,{label:"Asc",value:"asc"}),r.a.createElement(D.a,{label:"Desc",value:"desc"})),r.a.createElement(P.b,{onSubmit:l,render:function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(P.a,{name:"packName",component:"input",type:"text",placeholder:"Package name"}),r.a.createElement(P.a,{name:"packPrice",component:"input",type:"number",placeholder:"Package price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}))))},W="FETCH_GAMES_SUCCESS",H="gameUpdate",L="FETCH_PACKS_SUCCESS",M=(a(113),a(42)),U=function(e){return e.games},V=Object(M.a)([function(e){return e.packs},U],function(e,t){return e.map(function(e){var a=Object(i.a)({},e);return a.games=[],a.type="pack",a.items.forEach(function(e){var n=t.find(function(t){return t.appId===parseInt(e)});n&&a.games.push(n)}),a.playtimeForever=0,a.games&&a.games.length&&(a.games.forEach(function(e){return a.playtimeForever+=e.playtimeForever}),a.logo=a.games[Math.floor(Math.random()*(a.games.length-1))].logo,a.pricePerHour=O(a)),a.totalPrice=a.price,a})}),X=Object(M.a)([U],function(e){return e.map(function(e){var t=Object(i.a)({},e);return isNaN(parseInt(t.price))?t.price=0:t.price=parseInt(t.price),t.pricePerHour=O(t),t.totalPrice=k(t),t})}),z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={serverStatus:"",sortedBy:"playtimeForever",sortOrder:"desc",isSettingsOpen:!1,isStatsOpen:!1},a.fetchData=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.fetchGames();case 2:return e.next=4,a.props.fetchPacks();case 4:case"end":return e.stop()}},e,this)})),a.updateItem=function(e,t){a.setState({serverStatus:"loading"}),g.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),t).then(function(n){a.props.gameUpdate(Object(i.a)({appId:e},t)),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addDlc=function(e,t){var n=t.dlcName,r=t.dlcPrice,c=a.props.games.find(function(t){return t.appId===e});return a.setState({serverStatus:"loading"}),g.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{dlc:Object(s.a)(c.dlc).concat([{name:n,price:r}])}).then(function(e){a.props.gameUpdate(e.data),a.setState({serverStatus:"success"})}).catch(function(e){return a.setState({serverStatus:"error"})})},a.addPack=function(e){var t=e.packName,a=e.packPrice;g.a.post("http://steamify-api.61hub.com/v1/packs",{name:t,price:a})},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.games,n=t.packs;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"controls"},r.a.createElement(F.a,{className:"bp3-minimal",onClick:function(){return e.setState({isSettingsOpen:!0})},icon:"settings"}),r.a.createElement(F.a,{className:"bp3-minimal",onClick:function(){return e.setState({isStatsOpen:!0})},icon:"grouped-bar-chart"}),r.a.createElement(F.a,{className:"bp3-minimal",onClick:this.fetchData,icon:"refresh"})),r.a.createElement(R,{isOpen:this.state.isSettingsOpen,onClose:function(){return e.setState({isSettingsOpen:!1})},serverStatus:this.state.serverStatus,onSortChange:function(t){return e.setState({sortedBy:t.currentTarget.value})},sortedBy:this.state.sortedBy,sortOrder:this.state.sortOrder,onSortOrderChange:function(t){return e.setState({sortOrder:t.currentTarget.value})},addPack:this.addPack}),r.a.createElement(G.a,{isOpen:this.state.isStatsOpen,onClose:function(){return e.setState({isStatsOpen:!1})},autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:x.a.RIGHT,usePortal:!0,size:G.a.SIZE_LARGE},r.a.createElement("div",{className:T.a.DRAWER_BODY},r.a.createElement("div",{className:T.a.DIALOG_BODY},r.a.createElement(A,{games:Object(s.a)(this.props.games),packs:Object(s.a)(this.props.packs)})))),r.a.createElement("div",{className:"mainWrapper"},I.orderBy(Object(s.a)(n).concat(Object(s.a)(a)),[this.state.sortedBy,"playtimeForever"],[this.state.sortOrder]).filter(function(e){return!e.hidden}).map(function(t,a){return r.a.createElement(j,{key:t.appId,data:t,index:a,onChange:e.updateItem,onPriceChange:e.updateItem,onAddDlcFormSubmit:e.addDlc,packages:e.props.packs,packId:e.state.packId,onAddedToPack:e.fetchData})})))}}]),t}(n.Component);z.defaultProps={games:[],packs:[]};var K=Object(w.b)(function(e){return{games:X(e),packs:V(e)}},{fetchGames:function(){return function(e){return g.a.get("http://steamify-api.61hub.com/v1/games").then(function(t){return e((a=t.data,{type:W,games:a}));var a})}},fetchPacks:function(){return function(e){return g.a.get("http://steamify-api.61hub.com/v1/packs").then(function(t){return e((a=t.data,{type:L,packs:a}));var a})}},gameUpdate:function(e){return{type:H,game:e}}})(z),Y=a(15),J=a(43),Z=Object(Y.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return t.games;case H:return e.map(function(e){return e.appId===t.game.appId?Object(i.a)({},e,t.game):e});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return t.packs;default:return e}}}),Q=window.__REDUX_DEVTOOLS_EXTENSION__?Object(Y.d)(Object(Y.a)(J.a),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(Y.a)(J.a),q=Object(Y.e)(Z,Q);o.a.render(r.a.createElement(w.a,{store:q},r.a.createElement(K,null)),document.getElementById("root"))},63:function(e,t,a){e.exports=a(114)},9:function(e,t,a){e.exports={gameWrapper:"Game_gameWrapper__2AG3X",hidden:"Game_hidden__2fBRt",gameIcon:"Game_gameIcon__2PFn2",options:"Game_options__oRGaS",items:"Game_items__FCx4C",item:"Game_item__3-19d",details:"Game_details__3t6zl",expanded:"Game_expanded__3K6Ps",addDlcWrapper:"Game_addDlcWrapper__jxUtc",gameDuration:"Game_gameDuration__1zQtp",completed:"Game_completed__8B1RG"}}},[[63,2,1]]]);
//# sourceMappingURL=main.0b7ff749.chunk.js.map