(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,a,t){},120:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),o=t.n(c),s=t(25),i=t(15),l=t(43),m=t.n(l),p=t(62),u=t(32),d=t(33),f=t(37),h=t(34),g=t(38),v=t(13),E=t.n(v),b=t(31),_=t(30),y=function(e){var a=0;if(!e.items&&e.dlc.length>0&&e.dlc.forEach(function(e){a+=e.price}),"pack"===e.type){var t=0;return e.games.forEach(function(e){return t+=e.playtimeForever}),t<=60?e.price:Math.round(e.price/t/60)}if(e.playtimeForever<=60)return e.price+a;var n=e.playtimeForever/60;return(e.price+a)/n},O=function(e){var a=Math.floor(e/60),t=e%60;return t>10&&t.toString().length<2&&(t*=10),a?t?"".concat(a,"h ").concat(t,"m"):"".concat(a,"h"):"".concat(t,"m")},k=function(e){var a=e.price;return e.dlc&&e.dlc.length&&e.dlc.forEach(function(e){return a+=e.price}),a},S=t(21),D=t.n(S),C=t(3),N=t.n(C),P=t(35),I=t(12),j=t(63),G=t.n(j),x=function(e){var a=e.src;return r.a.createElement("div",{className:G.a.logoWrapper},r.a.createElement("img",{src:a,alt:"Game logo"}))},w=t(14),F=t.n(w),T=function(e){var a=e.data,t=(a=void 0===a?{}:a).status,n=a.totalPrice,c=a.name,o=Object(_.a)(a,["status","totalPrice","name"]),s=e.index,i=e.onTitleClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:F.a.gameInformation},r.a.createElement("div",{className:F.a.gameName,onClick:i},c),r.a.createElement("div",{className:F.a.gameMinorInfo},r.a.createElement("div",{className:N()(F.a.gameHourPrice,F.a[function(e){var a=y(e);return a<=10?"darkGreen":a<=50?"green":a<=100?"yellow":a<=200?"orange":a>=200?"red":void 0}(o)])}),r.a.createElement("div",{className:F.a.gameIndex},"#",s+1),r.a.createElement("div",null,n,"P"))),r.a.createElement("div",{className:F.a.gameDuration},r.a.createElement("div",{className:F.a.status},"completed"===t&&r.a.createElement("span",null,"\u2705"),"endless"===t&&r.a.createElement("span",{className:F.a.endless},"\u221e"),"playing"===t&&r.a.createElement("span",null,"\ud83d\udd79"),"abandoned"===t&&r.a.createElement("span",null,"\u2620\ufe0f"),"story"===t&&r.a.createElement("span",null,"\ud83d\udcd6")),O(o.playtimeForever)))},W=t(123),A=t(126),R=t(124),B=t(26),L=function(e){var a=e.label,t=e.placeholder,n=e.helperText,c=void 0===n?"":n,o=e.input,s=Object(_.a)(e,["label","placeholder","helperText","input"]);return r.a.createElement(W.a,{helperText:c,label:a,labelFor:"field-".concat(a)},r.a.createElement(A.a,Object.assign({id:"field-".concat(a),placeholder:t||a,onValueChange:o.onChange},o,s)))},H=function(e){var a=e.input,t=e.options;Object(_.a)(e,["input","options"]);return r.a.createElement(W.a,{label:"Game Status",labelFor:"field-status"},r.a.createElement(R.a,Object.assign({options:t,id:"field-status"},a)))},M=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(f.a)(this,Object(h.a)(a).call(this,e))).toggleOptions=function(){t.setState({isExpanded:!t.state.isExpanded})},t.addToPack=function(e,a){a.preventDefault();var n=t.selectRef.current.options[t.selectRef.current.selectedIndex].value,r=t.props.packages.find(function(e){return e.packId===n});E.a.patch("http://steamify-api.61hub.com/v1/packs/".concat(n),{items:Object(s.a)(r.items).concat([e])}).then(function(){t.props.onAddedToPack(),t.onChange({status:"hidden"})})},t.onChange=function(){var e=t.props,a=e.onChange,n=e.data;t.toggleOptions();for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return a.apply(void 0,[n.appId].concat(c))},t.renderOptions=function(){var e=t.props.data,a=["default","playing","completed","endless","abandoned","hidden","story"];return r.a.createElement("div",{className:D.a.options},r.a.createElement(I.b,{onSubmit:function(){var e;return(e=t).onChange.apply(e,arguments)},render:function(t){var n=t.handleSubmit;return r.a.createElement("form",{onSubmit:n},r.a.createElement(I.a,{name:"price",initialValue:e.price,defaultValue:e.price,label:"Price",component:L,type:"text",placeholder:"Game price",format:function(e){return parseInt(e,10)}}),r.a.createElement(I.a,{name:"status",component:H,initialValue:e.status,options:a}),r.a.createElement(B.a,{minimal:!0,type:"submit",icon:"tick"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}),"pack"!==e.type&&r.a.createElement("form",{onSubmit:function(a){return t.addToPack(e.appId,a)}},r.a.createElement("select",{ref:t.selectRef},r.a.createElement("option",{value:""}),t.props.packages&&t.props.packages.map(function(e){return r.a.createElement("option",{value:e.packId},e.name)})),r.a.createElement("button",null,"Add to Pack")))},t.selectRef=r.a.createRef(),t.state={isExpanded:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.data,n=a.index,c="pack"===t.type,o=c?t.games:t.dlc;return r.a.createElement("div",null,r.a.createElement("div",{className:D.a.gameWrapper},r.a.createElement(x,{src:t.logo}),r.a.createElement(T,{data:t,index:n,onTitleClick:this.toggleOptions})),r.a.createElement("div",{className:N()(D.a.details,Object(b.a)({},D.a.expanded,this.state.isExpanded))},this.renderOptions(),r.a.createElement("div",{className:D.a.items},!P.isEmpty(o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,c?"Items in pack:":"DLCs list:"),o.map(function(e){return r.a.createElement("div",{className:D.a.item},e.name&&r.a.createElement("div",null,e.name),c?r.a.createElement("div",null,O(e.playtimeForever)):r.a.createElement("div",null,e.price))})),!c&&r.a.createElement("div",{className:D.a.addDlcWrapper},r.a.createElement("h3",null,"Add DLC"),r.a.createElement(I.b,{onSubmit:function(){for(var a,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=e.props).onAddDlcFormSubmit.apply(a,[t.appId].concat(r))},render:function(e){var a=e.handleSubmit,t=e.reset;return r.a.createElement("form",{onSubmit:function(){return a.apply(void 0,arguments).then(t)}},r.a.createElement(I.a,{name:"dlcName",component:"input",type:"text",placeholder:"DLC name"}),r.a.createElement(I.a,{name:"dlcPrice",component:"input",type:"number",placeholder:"DLC price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}})))))}}]),a}(n.Component),U=t(36),V=t(127),K=t(16),X=t(24),Y=(t(101),t(103),t(105),t(107),function(e){var a=e.games,t=e.packs,n=0,c=0;return a.forEach(function(e){e.hidden||(n+=k(e),c+=e.playtimeForever)}),t.forEach(function(e){n+=e.price,c+=e.playtimeForever}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats"},r.a.createElement("div",null,"Total price: ".concat(n,"P")),r.a.createElement("div",null,"Total playtime: ".concat(Math.round(c/60),"hrs"))),r.a.createElement("div",{className:"twoWeeks"},r.a.createElement("h3",null,"Two weeks leaders:"),a.filter(function(e){return e.playtimeTwoWeeks}).sort(function(e,a){return a.playtimeTwoWeeks-e.playtimeTwoWeeks}).map(function(e){var a=Object(i.a)({},e);return a.playtimeForever=a.playtimeTwoWeeks,a}).map(function(e,a){return r.a.createElement(M,{data:e,index:a},e.name," ",O(e.playtimeTwoWeeks))})))}),z=t(125),Z=t(118),q=function(e){var a=e.isOpen,t=e.onClose,n=e.serverStatus,c=e.onSortChange,o=e.sortedBy,s=e.sortOrder,i=e.onSortOrderChange,l=e.addPack;return r.a.createElement(V.a,{isOpen:a,onClose:t,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:K.a.RIGHT,usePortal:!0,size:V.a.SIZE_SMALL},r.a.createElement("div",{className:X.a.DRAWER_BODY},r.a.createElement("div",{className:X.a.DIALOG_BODY},r.a.createElement("div",{className:"loadingState ".concat(n)}),r.a.createElement(z.a,{label:"Sort by:",onChange:c,selectedValue:o},r.a.createElement(Z.a,{label:"Price",value:"totalPrice"}),r.a.createElement(Z.a,{label:"Hours",value:"playtimeForever"}),r.a.createElement(Z.a,{label:"Price per hour",value:"pricePerHour"})),r.a.createElement(z.a,{label:"Order:",onChange:i,selectedValue:s},r.a.createElement(Z.a,{label:"Asc",value:"asc"}),r.a.createElement(Z.a,{label:"Desc",value:"desc"})),r.a.createElement(I.b,{onSubmit:l,render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(I.a,{name:"packName",component:"input",type:"text",placeholder:"Package name"}),r.a.createElement(I.a,{name:"packPrice",component:"input",type:"number",placeholder:"Package price"}),r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))}}))))},J="FETCH_GAMES_SUCCESS",Q="gameUpdate",$="FETCH_PACKS_SUCCESS",ee=(t(119),t(46)),ae=function(e){return e.games},te=Object(ee.a)([function(e){return e.packs},ae],function(e,a){return e.map(function(e){var t=Object(i.a)({},e);return t.games=[],t.type="pack",t.items.forEach(function(e){var n=a.find(function(a){return a.appId===parseInt(e)});n&&t.games.push(n)}),t.playtimeForever=0,t.games&&t.games.length&&(t.games.forEach(function(e){return t.playtimeForever+=e.playtimeForever}),t.logo=t.games[Math.floor(Math.random()*(t.games.length-1))].logo,t.pricePerHour=y(t)),t.totalPrice=t.price,t})}),ne=Object(ee.a)([ae],function(e){return e.map(function(e){var a=Object(i.a)({},e);return isNaN(parseInt(a.price))?a.price=0:a.price=parseInt(a.price),a.pricePerHour=y(a),a.totalPrice=k(a),a})}),re=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(f.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(r)))).state={serverStatus:"",sortedBy:"playtimeForever",sortOrder:"desc",isSettingsOpen:!1,isStatsOpen:!1},t.fetchData=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.fetchGames();case 2:return e.next=4,t.props.fetchPacks();case 4:case"end":return e.stop()}},e,this)})),t.updateItem=function(e,a){t.setState({serverStatus:"loading"}),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),a).then(function(n){t.props.gameUpdate(Object(i.a)({appId:e},a)),t.setState({serverStatus:"success"})}).catch(function(e){return t.setState({serverStatus:"error"})})},t.addDlc=function(e,a){var n=a.dlcName,r=a.dlcPrice,c=t.props.games.find(function(a){return a.appId===e});return t.setState({serverStatus:"loading"}),E.a.patch("http://steamify-api.61hub.com/v1/games/".concat(e),{dlc:Object(s.a)(c.dlc).concat([{name:n,price:r}])}).then(function(e){t.props.gameUpdate(e.data),t.setState({serverStatus:"success"})}).catch(function(e){return t.setState({serverStatus:"error"})})},t.addPack=function(e){var a=e.packName,t=e.packPrice;E.a.post("http://steamify-api.61hub.com/v1/packs",{name:a,price:t})},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,a=this.props,t=a.games,n=a.packs;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"controls"},r.a.createElement(B.a,{className:"bp3-minimal",onClick:function(){return e.setState({isSettingsOpen:!0})},icon:"settings"}),r.a.createElement(B.a,{className:"bp3-minimal",onClick:function(){return e.setState({isStatsOpen:!0})},icon:"grouped-bar-chart"}),r.a.createElement(B.a,{className:"bp3-minimal",onClick:this.fetchData,icon:"refresh"})),r.a.createElement(q,{isOpen:this.state.isSettingsOpen,onClose:function(){return e.setState({isSettingsOpen:!1})},serverStatus:this.state.serverStatus,onSortChange:function(a){return e.setState({sortedBy:a.currentTarget.value})},sortedBy:this.state.sortedBy,sortOrder:this.state.sortOrder,onSortOrderChange:function(a){return e.setState({sortOrder:a.currentTarget.value})},addPack:this.addPack}),r.a.createElement(V.a,{isOpen:this.state.isStatsOpen,onClose:function(){return e.setState({isStatsOpen:!1})},autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,position:K.a.RIGHT,usePortal:!0,size:V.a.SIZE_LARGE},r.a.createElement("div",{className:X.a.DRAWER_BODY},r.a.createElement("div",{className:X.a.DIALOG_BODY},r.a.createElement(Y,{games:Object(s.a)(this.props.games),packs:Object(s.a)(this.props.packs)})))),r.a.createElement("div",{className:"mainWrapper"},P.orderBy(Object(s.a)(n).concat(Object(s.a)(t)),[this.state.sortedBy,"playtimeForever"],[this.state.sortOrder]).filter(function(e){return"hidden"!==e.status}).map(function(a,t){return r.a.createElement(M,{key:a.appId,data:a,index:t,onChange:e.updateItem,onAddDlcFormSubmit:e.addDlc,packages:e.props.packs,packId:e.state.packId,onAddedToPack:e.fetchData})})))}}]),a}(n.Component);re.defaultProps={games:[],packs:[]};var ce=Object(U.b)(function(e){return{games:ne(e),packs:te(e)}},{fetchGames:function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/games").then(function(a){return e((t=a.data,{type:J,games:t}));var t})}},fetchPacks:function(){return function(e){return E.a.get("http://steamify-api.61hub.com/v1/packs").then(function(a){return e((t=a.data,{type:$,packs:t}));var t})}},gameUpdate:function(e){return{type:Q,game:e}}})(re),oe=t(17),se=t(47),ie=Object(oe.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case J:return a.games;case Q:return e.map(function(e){return e.appId===a.game.appId?Object(i.a)({},e,a.game):e});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case $:return a.packs;default:return e}}}),le=window.__REDUX_DEVTOOLS_EXTENSION__?Object(oe.d)(Object(oe.a)(se.a),window.__REDUX_DEVTOOLS_EXTENSION__()):Object(oe.a)(se.a),me=Object(oe.e)(ie,le);o.a.render(r.a.createElement(U.a,{store:me},r.a.createElement(ce,null)),document.getElementById("root"))},14:function(e,a,t){e.exports={gameInformation:"GameDetails_gameInformation__1y36Q",gameName:"GameDetails_gameName__1d1pq",gameMinorInfo:"GameDetails_gameMinorInfo__Uu8Kq",gameIndex:"GameDetails_gameIndex__1jUn9",gameHourPrice:"GameDetails_gameHourPrice__1d1m7",darkGreen:"GameDetails_darkGreen__YMiVp",green:"GameDetails_green__2e0DP",orange:"GameDetails_orange__39u1Q",red:"GameDetails_red__3WLRP",yellow:"GameDetails_yellow__2fyEK",status:"GameDetails_status__1xE9k",endless:"GameDetails_endless__HlE1L",gameDuration:"GameDetails_gameDuration__VZ_WH"}},21:function(e,a,t){e.exports={gameWrapper:"Game_gameWrapper__2AG3X",options:"Game_options__oRGaS",items:"Game_items__FCx4C",item:"Game_item__3-19d",details:"Game_details__3t6zl",expanded:"Game_expanded__3K6Ps",addDlcWrapper:"Game_addDlcWrapper__jxUtc"}},63:function(e,a,t){e.exports={logoWrapper:"GameLogo_logoWrapper__2duNv"}},68:function(e,a,t){e.exports=t(120)}},[[68,2,1]]]);
//# sourceMappingURL=main.57f902a7.chunk.js.map